{"version":3,"sources":["webpack:///webpack/bootstrap a578caf0f02607f4f8cd","webpack:///./lib/mazerace.js","webpack:///./lib/grid.js","webpack:///./lib/stylesheets/mazerace.scss"],"names":["require","document","addEventListener","gridEl","getElementById","grid","Grid","$el","el","Raphael","cols","rows","squares","currentAction","start","end","window","cellSize","cellStyles","normal","fill","wall","drawGrid","setDefaults","bindEvents","square","type","squareType","newX","attrs","x","newY","y","attr","toFront","row","col","tempRow","tempCol","animate","setAsSingleton","transform","setAsStart","setAsEnd","e","srcElement","getAttribute","setAsWall","setAction","handleSquare","hoverEvent","bind","clickEvent","callback","setSize","createRowTask","rowId","done","j","rect","push","sleep","setTimeout","tasks","i","async","series"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap a578caf0f02607f4f8cd","require('./stylesheets/mazerace.scss');\r\nimport Grid from './grid';\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  const gridEl = document.getElementById('chooser-grid');\r\n  let grid = new Grid(gridEl);\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/mazerace.js","class Grid {\r\n  constructor($el) {\r\n    this.el = $el;\r\n    this.grid = Raphael($el);\r\n    this.cols = 30;\r\n    this.rows = 30;\r\n    this.squares = [];\r\n    this.currentAction = null;\r\n    this.start = null;\r\n    this.end = null;\r\n    window.grid = this;\r\n    this.cellSize = 30;\r\n    this.cellStyles = {\r\n      normal: {\r\n        fill: 'white',\r\n        'stroke-opacity': 0.2\r\n      },\r\n      wall: {\r\n          fill: '#8B4513',\r\n          'stroke-opacity': 0.2,\r\n      },\r\n      start: {\r\n          fill: '#0d0',\r\n          'stroke-opacity': 0.2,\r\n      },\r\n      end: {\r\n          fill: '#e40',\r\n          'stroke-opacity': 0.2,\r\n      }\r\n    }\r\n\r\n    this.drawGrid(() => this.setDefaults());\r\n    this.bindEvents();\r\n  }\r\n\r\n  setAsSingleton(square, type) {\r\n    if( square.squareType == 'normal' ) {\r\n      if( this[type] ) {\r\n        let newX = square.attrs.x;\r\n        let newY = square.attrs.y;\r\n        square.attr({x: this[type].attrs.x, y: this[type].attrs.y});\r\n        this[type].attr({x: newX, y: newY}).toFront();\r\n        this.squares[this[type].row][this[type].col] = square;\r\n        this.squares[square.row][square.col] = this[type];\r\n        let tempRow = square.row;\r\n        let tempCol = square.col;\r\n        square.row = this[type].row;\r\n        square.col = this[type].col;\r\n        this[type].row = tempRow;\r\n        this[type].col = tempCol;\r\n      } else {\r\n        square.squareType = type;\r\n        this[type] = square;\r\n        square.animate(this.cellStyles[type], 100);\r\n      }\r\n    }\r\n  }\r\n\r\n  setAsStart(square) {\r\n    this.setAsSingleton(square, 'start');\r\n  }\r\n\r\n  setAsEnd(square) {\r\n    this.setAsSingleton(square, 'end');\r\n  }\r\n\r\n  setAsWall(square) {\r\n    if( square.squareType == 'normal' ) {\r\n      square.squareType = 'wall';\r\n      square.attr({\r\n        transform: 's1.2'\r\n      }).animate({\r\n        fill: this.cellStyles.wall.fill,\r\n        transform: 's1.0'\r\n      }, 100);\r\n    }\r\n  }\r\n\r\n  setDefaults() {\r\n    this.setAsStart(this.squares[10][10]);\r\n    this.setAsEnd(this.squares[20][20]);\r\n  }\r\n\r\n  handleSquare(e) {\r\n    const x = e.srcElement.getAttribute('x');\r\n    const y = e.srcElement.getAttribute('y');\r\n\r\n    if( x && y ) {\r\n      let col = x / this.cellSize;\r\n      let row = y / this.cellSize;\r\n\r\n      let square = this.squares[row][col];\r\n\r\n      if( square ) {\r\n        switch( this.currentAction ) {\r\n          case 'draggingStart':\r\n            this.setAsStart(square);\r\n            break;\r\n          case 'draggingEnd':\r\n            this.setAsEnd(square);\r\n            break;\r\n          case 'drawingWall':\r\n            this.setAsWall(square);\r\n            break;\r\n          default:\r\n            this.setAction(square);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  setAction(square) {\r\n    switch( square.squareType ) {\r\n      case 'start':\r\n        this.currentAction = 'draggingStart';\r\n        break;\r\n      case 'end':\r\n        this.currentAction = 'draggingEnd';\r\n        break;\r\n      default:\r\n        this.currentAction = 'drawingWall';\r\n        this.setAsWall(square);\r\n    }\r\n  }\r\n\r\n  hoverEvent(e) {\r\n    if( this.currentAction ) {\r\n      this.handleSquare(e);\r\n    }\r\n  }\r\n\r\n  clickEvent(e) {\r\n    this.handleSquare(e);\r\n    this.currentAction = null;\r\n  }\r\n\r\n  bindEvents() {\r\n    this.el.addEventListener('mouseover', this.hoverEvent.bind(this));\r\n    this.el.addEventListener('click', this.clickEvent.bind(this));\r\n    this.el.addEventListener('mousedown', this.handleSquare.bind(this));\r\n    this.el.addEventListener('mouseup', e => {\r\n      this.currentAction = null;\r\n    });\r\n  }\r\n\r\n  drawGrid(callback) {\r\n    let { squares, grid, cellSize, cols, rows, cellStyles } = this;\r\n    grid.setSize(cols * cellSize, rows * cellSize);\r\n\r\n    const createRowTask = function(rowId) {\r\n      return function(done) {\r\n        squares[rowId] = [];\r\n        for (let j = 0; j < cols; ++j) {\r\n          let x = j * cellSize;\r\n          let y = rowId * cellSize;\r\n\r\n          let square = grid.rect(x, y, cellSize, cellSize);\r\n          square.attr(cellStyles.normal);\r\n          square.squareType = 'normal';\r\n          square.row = rowId;\r\n          square.col = j;\r\n          squares[rowId].push(square);\r\n        }\r\n\r\n        done(null);\r\n      };\r\n    };\r\n\r\n    const sleep = function(done) {\r\n      setTimeout(function() {\r\n        done(null);\r\n      }, 0);\r\n    };\r\n\r\n    let tasks = [];\r\n    for (let i = 0; i < rows; ++i) {\r\n      tasks.push(createRowTask(i));\r\n      tasks.push(sleep);\r\n    }\r\n\r\n    async.series(tasks, function() {\r\n      if (callback) {\r\n        callback();\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport default Grid;\r\n\n\n\n// WEBPACK FOOTER //\n// ./lib/grid.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/stylesheets/mazerace.scss\n// module id = 2\n// module chunks = 0"],"sourceRoot":""}